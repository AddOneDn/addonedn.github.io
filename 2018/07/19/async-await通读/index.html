<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="async/awaité€šè¯»"><meta name="keywords" content="Javascript"><meta name="author" content="AddOneG,undefined"><meta name="copyright" content="AddOneG"><title>async/awaité€šè¯» | AddOneG</title><link rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css?version=1.5.3"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  localSearch: undefined
} </script></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#async"><span class="toc-number">1.</span> <span class="toc-text">async ?</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#è¯­æ³•"><span class="toc-number">1.1.</span> <span class="toc-text">è¯­æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#æè¿°"><span class="toc-number">1.2.</span> <span class="toc-text">æè¿°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ä¾‹å­"><span class="toc-number">1.3.</span> <span class="toc-text">ä¾‹å­</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#await"><span class="toc-number">2.</span> <span class="toc-text">await ?</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="http://p5sf6v0wz.bkt.clouddn.com/avatar.jpg"></div><div class="author-info__name text-center">AddOneG</div><div class="author-info__description text-center">å¿ƒä¼¼åŒä¸ç½‘ï¼Œä¸­æœ‰åƒåƒç»“</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">52</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">34</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">24</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">å‹æƒ…é“¾æ¥</div><a class="author-info-links__name text-center" href="https://blog.triplez.cn/" target="_blank">TripleZ</a><a class="author-info-links__name text-center" href="http://karlrixon.link/" target="_blank">karlrixon</a><a class="author-info-links__name text-center" href="http://qrzbing.cn/" target="_blank">a-Lie-Z</a><a class="author-info-links__name text-center" href="https://primykq.top/" target="_blank">Primykq</a><a class="author-info-links__name text-center" href="https://blog.zeddyu.info/" target="_blank">Zedd</a><a class="author-info-links__name text-center" href="https://yuwenjie.cc/" target="_blank">Seiry</a><a class="author-info-links__name text-center" href="https://mountainlovers.github.io/" target="_blank">Mountain_lovers</a><a class="author-info-links__name text-center" href="https://blog.rexskz.info/" target="_blank">Rex</a></div></div></div><div id="content-outer"><div class="plain" id="top-container"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">AddOneG</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/">ä¸»é¡µ</a><a class="site-page" href="/archives">æ—¶é—´è½´</a><a class="site-page" href="/tags">æ ‡ç­¾</a><a class="site-page" href="/categories">åˆ†ç±»</a></span></div></div><div class="layout" id="content-inner"><article id="post"><div class="plain" id="post-title">async/awaité€šè¯»</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-07-19</time><span class="post-meta__separator">|</span><i class="fa fa-inbox" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Javascript/"> Javascript</a><span class="post-meta__separator">|</span><span class="post-meta-wordcount"><span>Word count: </span><span class="word-count">1,246</span><span class="post-meta__separator">|</span><span>Reading time: 5 min</span></span></div><div id="post-content"><h2 id="async"><a href="#async" class="headerlink" title="async ?"></a>async ?</h2><h3 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h3><blockquote>
<p>async function name([param[, param[, â€¦ param]]]) { statements }</p>
</blockquote>
<ul>
<li><strong>name:</strong> å‡½æ•°åç§°</li>
<li><strong>param:</strong> è¦ä¼ é€’ç»™å‡½æ•°çš„å‚æ•°çš„åç§°</li>
<li><strong>statements:</strong> å‡½æ•°ä½“è¯­å¥</li>
</ul>
<h3 id="æè¿°"><a href="#æè¿°" class="headerlink" title="æè¿°"></a>æè¿°</h3><p><code>async</code> å‡½æ•°æ˜¯ <code>Generator</code> å‡½æ•°çš„è¯­æ³•ç³–ã€‚ä½¿ç”¨ å…³é”®å­— <code>async</code> æ¥è¡¨ç¤ºï¼Œåœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨ <code>await</code> æ¥è¡¨ç¤ºå¼‚æ­¥ã€‚</p>
<p>å½“è°ƒç”¨ä¸€ä¸ª <code>async</code> å‡½æ•°æ—¶ï¼Œä¼šè¿”å›ä¸€ä¸ª <code>Promise</code> å¯¹è±¡ã€‚å½“è¿™ä¸ª <code>async</code> å‡½æ•°è¿”å›ä¸€ä¸ªå€¼æ—¶ï¼Œ<code>Promise</code> çš„ resolve æ–¹æ³•ä¼šè´Ÿè´£ä¼ é€’è¿™ä¸ªå€¼ï¼›å½“ <code>async</code> å‡½æ•°æŠ›å‡ºå¼‚å¸¸æ—¶ï¼Œ<code>Promise</code> çš„ reject æ–¹æ³•ä¹Ÿä¼šä¼ é€’è¿™ä¸ªå¼‚å¸¸å€¼ã€‚</p>
<p><code>async</code> å‡½æ•°ä¸­å¯èƒ½ä¼šæœ‰ <code>await</code> è¡¨è¾¾å¼ï¼Œè¿™ä¼šä½¿ <code>async</code> å‡½æ•°æš‚åœæ‰§è¡Œï¼Œç­‰å¾…è¡¨è¾¾å¼ä¸­çš„ <code>Promise</code> è§£æå®Œæˆåç»§ç»­æ‰§è¡Œ <code>async</code> å‡½æ•°å¹¶è¿”å›è§£å†³ç»“æœ</p>
<p>æ€»çš„æ¥è¯´ä¸ºä»¥ä¸‹4ç‚¹ï¼š</p>
<ul>
<li><strong>å†…ç½®æ‰§è¡Œå™¨</strong>ã€‚<code>Generator</code> å‡½æ•°çš„æ‰§è¡Œå¿…é¡»ä¾é æ‰§è¡Œå™¨ï¼Œè€Œ <code>async</code> å‡½æ•°è‡ªå¸¦æ‰§è¡Œå™¨ï¼Œè°ƒç”¨æ–¹å¼è·Ÿæ™®é€šå‡½æ•°çš„è°ƒç”¨ä¸€æ ·</li>
<li><strong>æ›´å¥½çš„è¯­ä¹‰</strong>ã€‚<code>async</code> å’Œ <code>await</code> ç›¸è¾ƒäº <code>*</code> å’Œ <code>yield</code> æ›´åŠ è¯­ä¹‰åŒ–</li>
<li><strong>æ›´å¹¿çš„é€‚ç”¨æ€§</strong>ã€‚<code>co</code> æ¨¡å—çº¦å®šï¼Œ<code>yield</code> å‘½ä»¤åé¢åªèƒ½æ˜¯ Thunk å‡½æ•°æˆ– Promiseå¯¹è±¡ã€‚è€Œ <code>async</code> å‡½æ•°çš„ <code>await</code> å‘½ä»¤åé¢åˆ™å¯ä»¥æ˜¯ Promise æˆ–è€… åŸå§‹ç±»å‹çš„å€¼ï¼ˆNumberï¼Œstringï¼Œbooleanï¼Œä½†è¿™æ—¶ç­‰åŒäºåŒæ­¥æ“ä½œ</li>
<li><strong>è¿”å›å€¼æ˜¯ Promise</strong>ã€‚<code>async</code> å‡½æ•°è¿”å›å€¼æ˜¯ Promise å¯¹è±¡ï¼Œæ¯” Generator å‡½æ•°è¿”å›çš„ Iterator å¯¹è±¡æ–¹ä¾¿ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ <code>then()</code> æ–¹æ³•è¿›è¡Œè°ƒç”¨</li>
</ul>
<blockquote>
<p> <code>await</code> å…³é”®å­—ä»…ä»…åœ¨ async functionä¸­æœ‰æ•ˆã€‚å¦‚æœåœ¨ <code>async function</code>å‡½æ•°ä½“å¤–ä½¿ç”¨ <code>await</code> ï¼Œä½ åªä¼šå¾—åˆ°ä¸€ä¸ªè¯­æ³•é”™è¯¯ï¼ˆ<code>SyntaxError</code>ï¼‰</p>
</blockquote>
<blockquote>
<p><code>async/await</code>çš„ç”¨é€”æ˜¯ç®€åŒ–ä½¿ç”¨ <code>promises</code> å¼‚æ­¥è°ƒç”¨çš„æ“ä½œï¼Œå¹¶å¯¹ä¸€ç»„ <code>Promises</code>æ‰§è¡ŒæŸäº›æ“ä½œã€‚æ­£å¦‚<code>Promises</code>ç±»ä¼¼äºç»“æ„åŒ–å›è°ƒï¼Œ<code>async/await</code>ç±»ä¼¼äºç»„åˆç”Ÿæˆå™¨å’Œ <code>promises</code></p>
</blockquote>
<h3 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">asyncFn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'æˆ‘åæ‰§è¡Œ'</span></span><br><span class="line">&#125;</span><br><span class="line">asyncFn().then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(result);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'æˆ‘å…ˆæ‰§è¡Œ'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ‘å…ˆæ‰§è¡Œ</span></span><br><span class="line"><span class="comment">// æˆ‘åæ‰§è¡Œ</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>async å‡½æ•°è¿”å›çš„Promise resolveæ—¶ä¸ºå¼‚æ­¥</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">e</span>(<span class="params"></span>) </span>&#123;    </span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'has Error'</span>);</span><br><span class="line">&#125;</span><br><span class="line">e().then(<span class="function"><span class="params">success</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'æˆåŠŸ'</span>, success))   </span><br><span class="line">   .catch(<span class="function"><span class="params">error</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'å¤±è´¥'</span>, error));</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">throwStatus</span>(<span class="params"></span>) </span>&#123;    </span><br><span class="line">    <span class="keyword">return</span> <span class="string">'å¯ä»¥è¿”å›æ‰€æœ‰ç±»å‹çš„å€¼'</span></span><br><span class="line">&#125;</span><br><span class="line">throwStatus().then(<span class="function"><span class="params">success</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'æˆåŠŸ'</span>, success)              .catch(<span class="function"><span class="params">error</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'å¤±è´¥'</span>, error));</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤±è´¥</span></span><br><span class="line"><span class="comment">// æˆåŠŸ</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>async</code> å®šä¹‰çš„å‡½æ•°å†…éƒ¨ä¼šé»˜è®¤è¿”å›ä¸€ä¸ª<code>promise</code>å¯¹è±¡ï¼Œå¦‚æœå‡½æ•°å†…éƒ¨æŠ›å‡ºå¼‚å¸¸æˆ–è€…æ˜¯è¿”å›rejectï¼Œéƒ½ä¼šä½¿å‡½æ•°çš„<code>promise</code>çŠ¶æ€ä¸ºå¤±è´¥reject</p>
</blockquote>
<p>å¦‚ä¸‹ç»“æœä¼šä½¿asyncå‡½æ•°åˆ¤å®šå¤±è´¥reject: </p>
<ul>
<li>å†…éƒ¨å«æœ‰ç›´æ¥ä½¿ç”¨å¹¶ä¸”æœªå£°æ˜çš„å˜é‡æˆ–è€…å‡½æ•°</li>
<li>å†…éƒ¨æŠ›å‡ºä¸€ä¸ªé”™è¯¯<code>throw new Error</code>æˆ–è€…è¿”å›<code>reject</code>çŠ¶æ€<code>return Promise.reject(&#39;æ‰§è¡Œå¤±è´¥&#39;)</code></li>
<li>å‡½æ•°æ–¹æ³•æ‰§è¡Œå‡ºé”™ï¼ˆğŸŒ°ï¼šObjectä½¿ç”¨push()ï¼‰ç­‰ç­‰â€¦</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">resolveAfter2Seconds</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      resolve(x);</span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">add1</span>(<span class="params">x</span>) </span>&#123; </span><br><span class="line">  <span class="keyword">var</span> a = <span class="keyword">await</span> resolveAfter2Seconds(<span class="number">20</span>); </span><br><span class="line">  <span class="keyword">var</span> b = <span class="keyword">await</span> resolveAfter2Seconds(<span class="number">30</span>); </span><br><span class="line">  <span class="keyword">return</span> x + a + b; </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">add1(<span class="number">10</span>).then(<span class="function"><span class="params">v</span> =&gt;</span> &#123; </span><br><span class="line">  <span class="built_in">console</span>.log(v); <span class="comment">// prints 60 after 4 seconds. </span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">add2</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = resolveAfter2Seconds(<span class="number">20</span>);</span><br><span class="line">  <span class="keyword">var</span> b = resolveAfter2Seconds(<span class="number">30</span>);</span><br><span class="line">  <span class="keyword">return</span> x + <span class="keyword">await</span> a + <span class="keyword">await</span> b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">add2(<span class="number">10</span>).then(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(v);  <span class="comment">// prints 60 after 2 seconds.</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="await"><a href="#await" class="headerlink" title="await ?"></a>await ?</h2><p><code>await</code>æ„æ€æ˜¯<code>async wait</code>(å¼‚æ­¥ç­‰å¾…)ã€‚è¿™ä¸ªå…³é”®å­—åªèƒ½åœ¨ä½¿ç”¨<code>async</code>å®šä¹‰çš„å‡½æ•°é‡Œé¢ä½¿ç”¨ã€‚ä»»ä½•<code>async</code>å‡½æ•°éƒ½ä¼šé»˜è®¤è¿”å›<code>promise</code>ï¼Œå¹¶ä¸”è¿™ä¸ª<code>promise</code>è§£æçš„å€¼éƒ½å°†ä¼šæ˜¯è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼ï¼Œè€Œ<code>async</code>å‡½æ•°å¿…é¡»ç­‰åˆ°å†…éƒ¨æ‰€æœ‰çš„ <code>await</code> å‘½ä»¤çš„ <code>Promise</code> å¯¹è±¡æ‰§è¡Œå®Œï¼Œæ‰ä¼šå‘ç”ŸçŠ¶æ€æ”¹å˜</p>
<p><code>await</code>æ˜¯ä¸€ä¸ªè®©å‡ºçº¿ç¨‹çš„æ ‡å¿—ã€‚<code>await</code>åé¢çš„å‡½æ•°ä¼šå…ˆæ‰§è¡Œä¸€éï¼Œç„¶åå°±ä¼šè·³å‡ºæ•´ä¸ª<code>async</code>å‡½æ•°æ¥æ‰§è¡Œåé¢jsæ ˆçš„ä»£ç ã€‚ç­‰æœ¬è½®äº‹ä»¶å¾ªç¯æ‰§è¡Œå®Œäº†ä¹‹ååˆä¼šè·³å›åˆ°<code>async</code>å‡½æ•°ä¸­ç­‰å¾…<code>await</code>åé¢è¡¨è¾¾å¼çš„è¿”å›å€¼ï¼Œå¦‚æœè¿”å›å€¼ä¸ºé<code>promise</code>åˆ™ç»§ç»­æ‰§è¡Œ<code>async</code>å‡½æ•°åé¢çš„ä»£ç ï¼Œå¦åˆ™å°†è¿”å›çš„<code>promise</code>æ”¾å…¥<code>Promise</code>é˜Ÿåˆ—ï¼ˆPromiseçš„Job Queueï¼‰</p>
<blockquote>
<p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œ<code>await</code> å‘½ä»¤åé¢è·Ÿç€çš„æ˜¯ <code>Promise</code> ï¼Œå¦‚æœä¸æ˜¯çš„è¯ï¼Œä¹Ÿä¼šè¢«è½¬æ¢æˆä¸€ä¸ª ç«‹å³ <code>resolve</code> çš„ <code>Promise</code></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">start</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'START'</span>);</span><br><span class="line">    <span class="keyword">const</span> time1 = <span class="number">500</span>;</span><br><span class="line">    <span class="keyword">const</span> time2 = <span class="keyword">await</span> first(time1);</span><br><span class="line">    <span class="keyword">const</span> time3 = <span class="keyword">await</span> second(time2);</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> third(time3);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`æœ€åä¸€æ¬¡å»¶è¿Ÿ<span class="subst">$&#123;res&#125;</span>`</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'END'</span>);</span><br><span class="line">&#125;</span><br><span class="line">start();</span><br><span class="line"></span><br><span class="line"><span class="comment">// START</span></span><br><span class="line"><span class="comment">// ç¬¬ä¸€æ¬¡å»¶è¿Ÿäº†500</span></span><br><span class="line"><span class="comment">// ç¬¬äºŒæ¬¡å»¶è¿Ÿäº†700</span></span><br><span class="line"><span class="comment">// ç¬¬ä¸‰æ¬¡å»¶è¿Ÿäº†900</span></span><br><span class="line"><span class="comment">// æœ€åä¸€æ¬¡å»¶è¿Ÿ1100</span></span><br><span class="line"><span class="comment">// END</span></span><br></pre></td></tr></table></figure>
<p>æœ€åä¸€ä¸ªä¾‹å­</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">testSometing</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"testSomething"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"return testSomething"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">testAsync</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"testAsync"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(<span class="string">"hello async"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"test start..."</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> testFn1 = <span class="keyword">await</span> testSometing();</span><br><span class="line">    <span class="built_in">console</span>.log(testFn1);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> testFn2 = <span class="keyword">await</span> testAsync();</span><br><span class="line">    <span class="built_in">console</span>.log(testFn2);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'test end...'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">test();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> promiseFn = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>)=&gt;</span> &#123; </span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">"promise START..."</span>);</span><br><span class="line">                    resolve(<span class="string">"promise RESOLVE"</span>);</span><br><span class="line">                &#125;);</span><br><span class="line">promiseFn.then(<span class="function">(<span class="params">val</span>)=&gt;</span> <span class="built_in">console</span>.log(val));</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"===END==="</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// test start...</span></span><br><span class="line"><span class="comment">// testSomething</span></span><br><span class="line"><span class="comment">// promise START...</span></span><br><span class="line"><span class="comment">// ===END===</span></span><br><span class="line"><span class="comment">// return testSomething</span></span><br><span class="line"><span class="comment">// testAsync</span></span><br><span class="line"><span class="comment">// promise RESOLVE</span></span><br><span class="line"><span class="comment">// hello async</span></span><br><span class="line"><span class="comment">// test end...</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ–‡ç« å‚è€ƒäº<a href="https://juejin.im/post/5b1ffff96fb9a01e345ba704" target="_blank" rel="noopener">ä¸€æ¬¡æ€§è®©ä½ æ‡‚async/awaitï¼Œè§£å†³å›è°ƒåœ°ç‹±</a>å’Œ<code>MDN</code></p>
</blockquote>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">AddOneG</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://yoursite.com/2018/07/19/async-awaité€šè¯»/">http://yoursite.com/2018/07/19/async-awaité€šè¯»/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Javascript/">Javascript</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2018/07/19/Promiseç²¾è¯»/"><i class="fa fa-chevron-left">  </i><span>Promiseç²¾è¯»</span></a></div><div class="next-post pull-right"><a href="/2018/06/24/Javascriptå¼•æ“ä¹‹å±æ€§è®¿é—®ä¼˜åŒ–/"><span>Javascriptå¼•æ“ä¹‹å±æ€§è®¿é—®ä¼˜åŒ–</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2017 - 2018 By AddOneG</div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="/js/third-party/anime.min.js"></script><script src="/js/third-party/jquery.min.js"></script><script src="/js/third-party/jquery.fancybox.min.js"></script><script src="/js/third-party/velocity.min.js"></script><script src="/js/third-party/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.5.3"></script><script src="/js/fancybox.js?version=1.5.3"></script><script src="/js/sidebar.js?version=1.5.3"></script><script src="/js/copy.js?version=1.5.3"></script><script src="/js/fireworks.js?version=1.5.3"></script><script src="/js/transition.js?version=1.5.3"></script><script src="/js/scroll.js?version=1.5.3"></script><script src="/js/head.js?version=1.5.3"></script></body></html>